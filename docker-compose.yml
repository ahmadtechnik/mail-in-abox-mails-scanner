version: '3.8'

services:
  app:
    build: .
    ports:
      - "${PORT}:${PORT}"
    volumes:
      - /home/user-data/mail/mailboxes:/home/mail:ro
      - .env:/app/.env
      - ./app.js:/app/app.js
      - node_modules_cache:/app/node_modules
    env_file:
      - .env
    user: mail
    restart: unless-stopped

volumes:
  node_modules_cache:
    driver: local